<!--/////////////////////////////////////////////////-->
<!--////////////////USER FACING PAGE/////////////////-->
<!--/////////////////////////////////////////////////-->

{% extends "public.html" %} {% block page %}
<div class="row q-col-gutter-md justify-center">
  <div class="col-12 col-sm-6 col-md-5 col-lg-4">
    <q-card class="q-pa-lg">
      <q-card-section class="q-pa-none q-mb-md">
        <span class="text-h5">Client Data</span>
      </q-card-section>
      <q-card-section class="q-pa-none q-col-gutter-md">
        <!-- << cancel_comment >>
        << extension_builder_stub_public_client_inputs >>
        << cancel_comment >> -->
      </q-card-section>

      <q-card-section class="q-pa-none q-mt-md">
        <div class="row">
          <div class="col">
            <q-btn
              @click="submitClientData"
              unelevated
              color="primary"
              class="float-right"
            >
              <span>Submit</span>
            </q-btn>
          </div>
        </div>
      </q-card-section>
      <q-card-section></q-card-section>
    </q-card>
  </div>
  <div class="col-12 col-sm-6 col-md-5 col-lg-4 q-gutter-y-md">
    <q-card>
      <q-card-section>
        <h6 class="text-subtitle1 q-mb-sm q-mt-none">Public Page</h6>
        <p class="q-my-none">
          Most extensions have a public page that can be shared (this page will
          still be accessible even if you have restricted access to your LNbits
          install).
        </p></q-card-section
      >
    </q-card>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  window.app = Vue.createApp({
    el: "#vue",
    mixins: [windowMixin],
    data: function () {
      return {
        ownerDataId: "{{ owner_data_id }}",
        publicClientData: {},
      };
    },
    methods: {
      async submitClientData() {
        try {
          const { data } = await LNbits.api.request(
            "PUT",
            `/extension_builder_stub/api/v1/client_data/public/${this.ownerDataId}`,
            null,
            this.publicClientData,
          );
          console.log("### Data submitted:", data);
        } catch (error) {
          LNbits.utils.notifyApiError(error);
        }
      },
    },
    created: function () {
      // Will trigger payment reaction when payment received, sent from tasks.py
    },
  });
</script>
{% endblock %}
